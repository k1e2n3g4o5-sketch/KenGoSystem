<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>KenGoå¼ï¼šç•°ä¸–ç•Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é‘‘å®š</title>
<style>
/* ===== THEME (Isekai Status Screen) ===== */
:root{
  --bg0:#0a0e17; --bg1:#0e1422; --panel:#0f1b2e; --ink:#eaf3ff; --mut:#a7b6d1;
  --edge:#22324d; --acc:#7dd3fc; --acc2:#a78bfa; --ok:#4ade80; --warn:#fbbf24;
  --bar:#1e2a3f; --grid:#152038; --hp:#ef4444; --mp:#60a5fa; --sp:#22d3ee;
}
*{box-sizing:border-box}
html,body{margin:0;background:radial-gradient(1200px 900px at 70% -10%,#11223a 0%,var(--bg0) 35%,var(--bg1) 100%);color:var(--ink);font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,"Hiragino Sans","Noto Sans JP",Helvetica,Arial;line-height:1.6}
.wrap{max-width:1000px;margin:0 auto;padding:18px}
.header{display:flex;align-items:center;gap:14px;margin:8px 0 12px}
.logo{width:42px;height:42px;border-radius:10px;background:linear-gradient(135deg,#1b2a44,#0f172a);border:1px solid var(--edge);display:grid;place-items:center;box-shadow:0 0 0 4px #0a1222 inset,0 8px 22px #0007}
.logo b{font-size:18px;letter-spacing:.5px;color:#9dd7ff}
h1{margin:0;font-size:24px}
.sub{color:var(--mut);margin-top:-2px}

/* control card */
.card{background:linear-gradient(180deg,rgba(18,27,47,.9),rgba(13,19,33,.88));border:1px solid var(--edge);border-radius:18px;padding:16px;margin:12px 0;box-shadow:0 8px 30px rgba(0,0,0,.35)}
.grid{display:grid;gap:12px}
@media(min-width:860px){.grid{grid-template-columns:1.2fr 1fr}}
label{display:block;margin:8px 6px 6px}
.input{width:100%;padding:14px 16px;border-radius:12px;border:1px solid var(--edge);background:rgba(2,6,23,.6);color:var(--ink);font-size:18px}
.input::placeholder{color:var(--mut)}
.btn{width:100%;padding:14px 18px;border:0;border-radius:12px;background:linear-gradient(90deg,var(--acc),var(--acc2));color:#001018;font-size:18px;font-weight:800;cursor:pointer;margin-top:8px}
.err{color:#ff7a90;font-size:14px;display:none}

/* status layout */
.board{display:grid;gap:14px}
@media(min-width:860px){.board{grid-template-columns:320px 1fr}}
.panel{background:var(--panel);border:1px solid var(--edge);border-radius:16px;padding:14px;box-shadow:0 6px 18px #0009}
h2{font-size:20px;margin:0 0 8px}
.small{color:var(--mut);font-size:13px}
.kv{display:grid;grid-template-columns:auto 1fr;gap:10px;align-items:center}
.avatar{width:90px;height:90px;border-radius:14px;background:linear-gradient(135deg,#17233b,#0c1424);border:1px solid var(--edge);display:grid;place-items:center;font-size:40px}
.tags{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
.tag{border:1px solid var(--edge);padding:8px 10px;border-radius:999px;font-size:14px;background:#0a1221}
.kv dl{margin:0}
.kv dt{font-size:13px;color:var(--mut)}
.kv dd{margin:0 0 6px 0;font-size:18px}

/* hp/mp/sp bars */
.stat{margin:8px 0}
.stat-row{display:grid;grid-template-columns:92px 1fr 64px;gap:10px;align-items:center}
.bar{height:16px;background:var(--bar);border-radius:999px;overflow:hidden}
.fill{height:100%;width:0;border-radius:999px;transition:width .6s}
.pct{text-align:right;font-variant-numeric:tabular-nums}

/* six skills */
.six{display:grid;gap:10px;margin-top:4px}
.skill-name{color:var(--mut);font-size:13px}

/* tabs */
.tabs{display:flex;gap:8px;margin-top:6px}
.tab{flex:1;padding:10px 12px;border:1px solid var(--edge);border-bottom:0;border-radius:12px 12px 0 0;background:#0d1728;color:var(--mut);text-align:center;cursor:pointer}
.tab.active{background:#13223a;color:var(--ink);font-weight:700}
.tabpan{border:1px solid var(--edge);border-radius:0 12px 12px 12px;padding:12px;background:#0e1a2e}

/* ring */
.ring{display:grid;place-items:center;margin-top:6px}
.ringtips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:6px}
.chip{border:1px solid var(--edge);padding:6px 8px;border-radius:10px;font-size:13px;background:#0a1221}

/* footer */
.foot{color:var(--mut);font-size:12px;text-align:center;margin:12px 0 2px}
.fly{opacity:0;transform:translateY(8px);transition:.35s ease}
.in{opacity:1;transform:translateY(0)}
</style>
</head>
<body>
<div class="wrap">
  <div class="header">
    <div class="logo"><b>OS</b></div>
    <div>
      <h1>KenGoå¼ï¼šç•°ä¸–ç•Œã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹é‘‘å®š</h1>
      <div class="sub">ç”Ÿå¹´æœˆæ—¥â†’å±æ€§ãƒ»HP/MP/SPãƒ»ã‚¹ã‚­ãƒ«ï¼ˆ6å¼ï¼‰/ ãƒ‘ãƒ¼ãƒ†ã‚£ç›¸æ€§ã€‚iPhoneæœ€é©åŒ–ã€‚</div>
    </div>
  </div>

  <div class="card grid">
    <div>
      <label>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰</label>
      <input id="nickA" class="input" placeholder="å‹‡è€… KenGo ãªã©ï¼ˆä»»æ„ï¼‰">
      <label>ç”Ÿå¹´æœˆæ—¥</label>
      <input id="dateA" class="input" inputmode="numeric" placeholder="19900504 / 1990-05-04 / 1990/05/04">
      <div id="errA" class="err">æ—¥ä»˜ã®å½¢å¼ã‚’ç¢ºèªã—ã¦ã­ã€‚</div>
      <button id="btnSelf" class="btn">â–¶ ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ç”Ÿæˆ</button>
    </div>
    <div>
      <label>ç›¸æ‰‹ã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰</label>
      <input id="nickB" class="input" placeholder="åƒ§ä¾¶ Rin ãªã©ï¼ˆä»»æ„ï¼‰">
      <label>ç›¸æ‰‹ã®ç”Ÿå¹´æœˆæ—¥ï¼ˆä»»æ„ï¼‰</label>
      <input id="dateB" class="input" inputmode="numeric" placeholder="19940322 / 1994-03-22 ãªã©">
      <div id="errB" class="err">ç›¸æ‰‹ã®æ—¥ä»˜ã®å½¢å¼ã‚’ç¢ºèªã—ã¦ã­ã€‚</div>
      <button id="btnBoth" class="btn">â–¶ ãƒ‘ãƒ¼ãƒ†ã‚£ç›¸æ€§ã‚‚è¡¨ç¤º</button>
    </div>
  </div>

  <div id="board" class="board fly" hidden>
    <!-- LEFT: Avatar & base -->
    <div class="panel">
      <h2>ã‚­ãƒ£ãƒ©ã‚¯ã‚¿ãƒ¼ / Character</h2>
      <div class="kv">
        <div id="avatar" class="avatar">?</div>
        <div>
          <dl>
            <dt>åå‰ / Name</dt>
            <dd id="cName">â€”</dd>
            <dt>ã‚¯ãƒ©ã‚¹ / Classï¼ˆå±æ€§ï¼‰</dt>
            <dd id="cClass">â€”</dd>
            <dt>ç§°å· / Title</dt>
            <dd id="cTitle">â€”</dd>
          </dl>
          <div class="tags" id="badges"></div>
        </div>
      </div>

      <div class="panel" style="margin-top:12px">
        <h2>åŸºç¤ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ / Base Stats</h2>
        <div class="stat">
          <div class="stat-row">
            <div>HPï¼ˆç”Ÿå‘½ï¼‰</div>
            <div class="bar"><div id="hpFill" class="fill" style="background:var(--hp)"></div></div>
            <div id="hpPct" class="pct">â€”%</div>
          </div>
          <div class="stat-row">
            <div>MPï¼ˆé›†ä¸­ï¼‰</div>
            <div class="bar"><div id="mpFill" class="fill" style="background:var(--mp)"></div></div>
            <div id="mpPct" class="pct">â€”%</div>
          </div>
          <div class="stat-row">
            <div>SPï¼ˆæµé€Ÿï¼‰</div>
            <div class="bar"><div id="spFill" class="fill" style="background:var(--sp)"></div></div>
            <div id="spPct" class="pct">â€”%</div>
          </div>
        </div>
        <div class="small">HP=å††ã®å®‰å®šã€MP=ç†è§£ã®é›†ä¸­ã€SP=é¢¨ã®ç§»å‹•é€Ÿåº¦ï¼ˆBâ†’Aè¦æ ¼ï¼‰</div>
      </div>
    </div>

    <!-- RIGHT: Tabs -->
    <div>
      <div class="tabs">
        <div id="tabStatus" class="tab active">ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹</div>
        <div id="tabCompat" class="tab">ãƒ‘ãƒ¼ãƒ†ã‚£ç›¸æ€§</div>
      </div>
      <div class="tabpan" id="panStatus">
        <h2>ã‚¹ã‚­ãƒ« / Skillsï¼ˆ6å¼ï¼…ï¼‰</h2>
        <div class="six" id="sixRows"></div>
        <div class="panel" style="margin-top:12px">
          <h2>ãƒ’ãƒ³ãƒˆ / Hints</h2>
          <div id="hints" class="small">â€”</div>
        </div>
      </div>
      <div class="tabpan" id="panCompat" style="display:none">
        <h2>ãƒ‘ãƒ¼ãƒ†ã‚£é©æ€§ / Party Synergy</h2>
        <div class="ring">
          <svg id="ring" width="260" height="260" viewBox="0 0 260 260" aria-label="Compatibility Rings">
            <defs>
              <linearGradient id="gA" x1="0" x2="1"><stop offset="0%" stop-color="#7dd3fc"/><stop offset="100%" stop-color="#a78bfa"/></linearGradient>
              <linearGradient id="gB" x1="0" x2="1"><stop offset="0%" stop-color="#a3e635"/><stop offset="100%" stop-color="#7dd3fc"/></linearGradient>
            </defs>
            <circle cx="130" cy="130" r="96" stroke="#1e2a3f" stroke-width="14" fill="none" opacity=".7"/>
            <circle cx="130" cy="130" r="70" stroke="#1e2a3f" stroke-width="14" fill="none" opacity=".7"/>
            <path id="arcA" d="" stroke="url(#gA)" stroke-width="14" fill="none" stroke-linecap="round"/>
            <path id="arcB" d="" stroke="url(#gB)" stroke-width="14" fill="none" stroke-linecap="round"/>
            <text id="ringScore" x="130" y="137" text-anchor="middle" font-size="28" fill="currentColor" font-weight="800">--%</text>
          </svg>
          <div class="ringtips" id="ringTips"></div>
        </div>
        <div class="panel" style="margin-top:12px">
          <h2>ç›¸æ€§ãƒ¡ãƒ¢ / Notes</h2>
          <div id="pairText">â€”</div>
        </div>
      </div>
    </div>
  </div>

  <div class="foot">â€»ã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ã€‚æ„Ÿã˜ã‚‹â†’ã‚ã‹ã‚‹ï¼ˆBâ†’Aï¼‰ã§éŠã¼ã†ã€‚/ KenGo OS é¢¨ãƒ—ãƒ­ãƒˆã‚¿ã‚¤ãƒ—</div>
</div>

<script>
(()=>{
// ====== Utils: Parse date flexibly ======
function parseDate(s){
  if(!s) return null;
  const z2h=String(s).trim().replace(/[ï¼-ï¼™ï¼ï¼ï¼ãƒ¼âˆ’]/g,c=>({"ï¼":"0","ï¼‘":"1","ï¼’":"2","ï¼“":"3","ï¼”":"4","ï¼•":"5","ï¼–":"6","ï¼—":"7","ï¼˜":"8","ï¼™":"9","ï¼":"/","ï¼":"-","ãƒ¼":"-","âˆ’":"-"}[c]??c));
  const digits=z2h.replace(/[^\d]/g,"");
  if(digits.length!==8) return null;
  const y=+digits.slice(0,4), m=+digits.slice(4,6), d=+digits.slice(6,8);
  const md=[31,(y%4===0&&(y%100!==0||y%400===0))?29:28,31,30,31,30,31,31,30,31,30,31];
  if(m<1||m>12||d<1||d>md[m-1]) return null;
  return {y,m,d};
}
function err(id,on){const e=document.getElementById(id); e.style.display=on?"block":"none";}

// ====== Isekai model ======
const ELEMENTS=["WIND","FIRE","WATER","EARTH"];
const EMOJI={WIND:"ğŸ’¨",FIRE:"ğŸ”¥",WATER:"ğŸŒŠ",EARTH:"ğŸª¨"};
const JP={WIND:"é¢¨",FIRE:"ç«",WATER:"æ°´",EARTH:"åœ°"};
const COLOR={WIND:"#22d3ee",FIRE:"#fb7185",WATER:"#60a5fa",EARTH:"#a3e635"};
const TITLES={WIND:"é¢¨èª­ã¿ã®æ—…äºº",FIRE:"ç‚‰ã®å®ˆã‚Šæ‰‹",WATER:"é¡ã®åº­ã®è³¢è€…",EARTH:"å¤§åœ°ã®æ¥¯"};
const COMP={
  WIND:{WIND:"GOOD",FIRE:"GREAT",WATER:"GOOD",EARTH:"NEUTRAL"},
  FIRE:{WIND:"GREAT",FIRE:"SPICY",WATER:"GOOD",EARTH:"GOOD"},
  WATER:{WIND:"GOOD",FIRE:"GOOD",WATER:"GOOD",EARTH:"GREAT"},
  EARTH:{WIND:"NEUTRAL",FIRE:"GOOD",WATER:"GREAT",EARTH:"GOOD"}
};
const COMP_EMO={GREAT:"ğŸ’",GOOD:"ğŸ’«",NEUTRAL:"ğŸŒ—",SPICY:"ğŸŒ¶ï¸"};
const COMP_TXT={
  GREAT:"æœ€é«˜ã®è¿½ã„é¢¨ã€‚ç«‹ã¤ã ã‘ã§é€²ã‚€ã€‚",
  GOOD:"é™ã‹ãªç›¸ä¹—ã€‚çŸ­ã„åˆå›³ã§ååˆ†ã€‚",
  NEUTRAL:"å¯ã‚‚ä¸å¯ã‚‚ãªã—ã€‚å°ã•ãªå„€å¼ã‚’å…±æœ‰ã™ã‚‹ã¨å®‰å®šã€‚",
  SPICY:"åˆºæ¿€å¤šã‚ã€‚ãƒšãƒ¼ã‚¹é…æ…®ã¨åˆå›³ã®ç´„æŸãŒéµã€‚"
};
const COMP_SCORE={GREAT:90,GOOD:76,NEUTRAL:58,SPICY:68};

function pickElement(ymd){ return ELEMENTS[(ymd.m + ymd.d) % 4]; }

// 6å¼ï¼…ï¼ˆæ±ºå®šè«–çš„ï¼‰
function sixVector(ymd){
  let seed=ymd.y*10000+ymd.m*100+ymd.d;
  function rnd(){ seed=(seed*1664525+1013904223)>>>0; return seed/4294967295; }
  const raw=[rnd(),rnd(),rnd(),rnd(),rnd(),rnd()].map(x=>0.6+x*0.9);
  raw[0]*=1+((ymd.d%5)-2)*0.03; // Circle
  raw[4]*=1+((ymd.m%4)-1)*0.04; // Wind
  raw[5]*=1+(((ymd.y%10)-5)*0.01); // Ritual/Rubber
  const sum=raw.reduce((a,b)=>a+b,0);
  return raw.map(v=>Math.round((v/sum)*100));
}
const SIXNAMES=[
  "Circle-Beingï¼ˆå††ã®ä½“ï¼‰",
  "Arrow-Worldï¼ˆçŸ¢å°ä¸–ç•Œè€æ€§ï¼‰",
  "Return-Growthï¼ˆå¯ã‚‹å­ã¯è‚²ã¤ï¼‰",
  "Top-Viewï¼ˆä¸Šè¦–ç‚¹ï¼‰",
  "Wind Flowï¼ˆé¢¨ã®å‘¼å¸ï¼‰",
  "Rubber Keyï¼ˆå¸°é‚„ã‚­ãƒ¼ï¼‰"
];

// HP/MP/SP ã‚’ 6å¼ã‹ã‚‰åˆæˆ
function baseStats(vec){
  const HP=Math.round((vec[0]+vec[2]+vec[5]) / 3); // å††ãƒ»å›å¾©ãƒ»ã‚´ãƒ 
  const MP=Math.round((vec[3]+vec[1]) / 2);        // ä¸Šè¦–ç‚¹ãƒ»çŸ¢å°ä¸–ç•Œç†è§£
  const SP=Math.round((vec[4]+vec[0]) / 2);        // é¢¨ãƒ»å††ã®ç§»å‹•
  return {HP,MP,SP};
}

function badge(html){ const s=document.createElement("span"); s.className="tag"; s.innerHTML=html; return s; }

function renderBars(vec){
  const colors=["#8b5cf6","#22d3ee","#f97316","#10b981","#60a5fa","#f472b6"];
  const rows=document.getElementById("sixRows"); rows.innerHTML="";
  SIXNAMES.forEach((nm,i)=>{
    const row=document.createElement("div"); row.className="stat-row";
    const nmv=document.createElement("div"); nmv.className="skill-name"; nmv.textContent=nm;
    const bar=document.createElement("div"); bar.className="bar";
    const fill=document.createElement("div"); fill.className="fill"; fill.style.background=colors[i]; bar.appendChild(fill);
    const pct=document.createElement("div"); pct.className="pct"; pct.textContent=vec[i]+"%";
    row.append(nmv,bar,pct); rows.appendChild(row);
    requestAnimationFrame(()=>{ fill.style.width=vec[i]+"%"; });
  });
}

function renderBase(hp,mp,sp){
  const set=(id,val)=>{ document.getElementById(id+"Pct").textContent = val+"%";
                        const el=document.getElementById(id+"Fill"); requestAnimationFrame(()=> el.style.width = val+"%"); };
  set("hp",hp); set("mp",mp); set("sp",sp);
}

function arcPath(cx,cy,r,startDeg,spanDeg){
  const toXY=(deg)=>[cx + r*Math.cos((deg-90)*Math.PI/180), cy + r*Math.sin((deg-90)*Math.PI/180)];
  const end=startDeg+spanDeg, large=spanDeg>180?1:0;
  const [sx,sy]=toXY(startDeg), [ex,ey]=toXY(end);
  return `M ${sx} ${sy} A ${r} ${r} 0 ${large} 1 ${ex} ${ey}`;
}

function renderCompat(elA, elB, nameA, nameB){
  const rank=COMP[elA][elB], emo=COMP_EMO[rank], text=COMP_TXT[rank], score=COMP_SCORE[rank];
  document.getElementById("pairText").textContent = `${emo} ${rank} â€” ${text}`;
  const span={GREAT:310,GOOD:250,SPICY:220,NEUTRAL:180}[rank]||240;
  document.getElementById("arcA").setAttribute("d", arcPath(130,130,96,18,span));
  document.getElementById("arcB").setAttribute("d", arcPath(130,130,70,28,Math.max(160,span-40)));
  document.getElementById("ringScore").textContent = score+"%";
  document.getElementById("ringTips").innerHTML =
    `<span class="chip">${nameA||"ã‚ãªãŸ"}ï¼š<b style="color:${COLOR[elA]}">${JP[elA]}</b></span>
     <span class="chip">${nameB||"ç›¸æ‰‹"}ï¼š<b style="color:${COLOR[elB]}">${JP[elB]}</b></span>`;
}

// Tabs
const tabStatus=document.getElementById("tabStatus");
const tabCompat=document.getElementById("tabCompat");
const panStatus=document.getElementById("panStatus");
const panCompat=document.getElementById("panCompat");
tabStatus.onclick=()=>{tabStatus.classList.add("active");tabCompat.classList.remove("active");panStatus.style.display="block";panCompat.style.display="none";}
tabCompat.onclick=()=>{tabCompat.classList.add("active");tabStatus.classList.remove("active");panCompat.style.display="block";panStatus.style.display="none";}

function revealBoard(){ const b=document.getElementById("board"); b.hidden=false; requestAnimationFrame(()=>b.classList.add("in")); }

function buildStatus(name, ymd){
  // element & titles
  const el=pickElement(ymd);
  document.getElementById("avatar").textContent = EMOJI[el];
  document.getElementById("cName").textContent = name||"ãªãªã—ã®è»¢ç”Ÿè€…";
  document.getElementById("cClass").innerHTML = `${JP[el]}ï¼ˆ${el}ï¼‰`;
  document.getElementById("cTitle").textContent = TITLES[el];

  const badges=document.getElementById("badges"); badges.innerHTML="";
  badges.append(badge("ğŸ’  Core=Rubber"));
  badges.append(badge("ğŸ’¨ Wind=Flow"));
  badges.append(badge("â­• Circle=Return"));
  badges.append(badge(`ğŸš å±æ€§ï¼š<b style="color:${COLOR[el]}">${JP[el]}</b>`));

  // six & base
  const vec=sixVector(ymd);
  renderBars(vec);
  const {HP,MP,SP}=baseStats(vec);
  renderBase(HP,MP,SP);

  // hints
  const hints = [
    "HPâ†‘ï¼šå¯ã‚‹ï¼æ¸©æµ´ï¼å¡©ï¼†æ°´ï¼ã‚†ã£ãã‚Šæ·±å‘¼å¸",
    "MPâ†‘ï¼šè¦–ç‚¹ã‚’â€œä¸Šâ€ã¸ï¼ˆä¿¯ç°ï¼‰â†’çŸ­ã„ãƒ¡ãƒ¢ã§è¦ç´„",
    "SPâ†‘ï¼šå§¿å‹¢ã‚’ä¸¸â†’å††ã€è‚©ãƒ»éª¨ç›¤ã‚’åŒæ™‚ã«â€œãµã£â€",
    "è¡çªæ™‚ï¼šå¸åâ†’æ•´å½¢â†’è¿”ã™ï¼ˆå—ã‘è¿”ã—ï¼‰",
  ];
  document.getElementById("hints").textContent = hints.join(" ï¼ ");
  return el;
}

// Buttons
document.getElementById("btnSelf").addEventListener("click", ()=>{
  const a=parseDate(document.getElementById("dateA").value); err("errA",!a); if(!a) return;
  buildStatus(document.getElementById("nickA").value.trim(), a);
  tabStatus.click(); revealBoard();
});
document.getElementById("btnBoth").addEventListener("click", ()=>{
  const a=parseDate(document.getElementById("dateA").value), b=parseDate(document.getElementById("dateB").value);
  err("errA",!a); err("errB",!b); if(!a||!b) return;
  const elA=buildStatus(document.getElementById("nickA").value.trim(), a);
  const elB=pickElement(b);
  renderCompat(elA, elB, document.getElementById("nickA").value.trim(), document.getElementById("nickB").value.trim());
  tabCompat.click(); revealBoard();
});
})();
</script>
</body>
</html>