<!DOCTYPE html>
<html lang="ja">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1,viewport-fit=cover">
<title>KenGoå¼ ç°¡æ˜“è¨ºæ–­ï¼ˆã‚„ã‚Šç›´ã—å®‰å®šç‰ˆï¼‰</title>
<style>
  :root{
    --bg:#0d1117; --card:#111827; --ink:#e5ecff; --sub:#9bb1cc; --line:#1f2937;
    --acc:#38bdf8; --acc2:#22d3ee; --ok:#4ade80; --bar:#334155;
  }
  html,body{margin:0;background:var(--bg);color:var(--ink);font-family:ui-sans-serif,-apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Helvetica,Arial;line-height:1.6}
  .wrap{max-width:860px;margin:0 auto;padding:20px}
  .card{background:var(--card);border:1px solid var(--line);border-radius:16px;padding:18px;margin:12px 0}
  h1{font-size:26px;margin:0 0 6px}
  p.lead{color:var(--sub);margin:0 0 6px}
  label{display:block;margin:10px 4px 6px;font-size:18px}
  .input{width:100%;padding:14px 16px;border-radius:12px;border:1px solid var(--line);background:transparent;color:var(--ink);font-size:18px}
  .input::placeholder{color:var(--sub)}
  .row{display:grid;grid-template-columns:1fr;gap:12px}
  @media(min-width:820px){.row{grid-template-columns:1fr 1fr}}
  button{width:100%;padding:14px 18px;border:0;border-radius:12px;background:linear-gradient(90deg,var(--acc),var(--acc2));color:#001014;font-size:20px;font-weight:800;cursor:pointer;margin-top:10px}
  .hint,.err{font-size:14px;margin:6px 4px 0}
  .hint{color:var(--sub)} .err{color:#ff7a90;display:none}
  .result{margin-top:12px;padding:14px;border:1px solid var(--line);border-radius:14px;background:#0b1320aa}
  .fly{opacity:0;transform:translateY(12px) scale(.985);transition:all .35s ease}
  .in{opacity:1;transform:translateY(0) scale(1)}
  .badges{display:flex;gap:8px;flex-wrap:wrap;margin-top:6px}
  .badge{border:1px solid var(--line);padding:8px 10px;border-radius:999px;font-size:15px}
  h2{font-size:22px;margin:8px 0}
  .six{display:grid;gap:10px;margin-top:8px}
  .six-row{display:grid;grid-template-columns:150px 1fr 64px;gap:10px;align-items:center}
  .six-name{color:var(--sub);font-size:14px}
  .bar{height:16px;background:var(--bar);border-radius:999px;overflow:hidden}
  .bar>i{display:block;height:100%;width:0;border-radius:999px;transition:width .6s ease}
  .pct{text-align:right;font-variant-numeric:tabular-nums;font-size:14px}
  .ring{display:grid;place-items:center;margin-top:8px}
  .ringtips{display:flex;gap:8px;flex-wrap:wrap;justify-content:center;margin-top:6px}
  .tag{border:1px solid var(--line);padding:6px 8px;border-radius:10px;font-size:14px}
  .foot{color:var(--sub);font-size:13px;margin-top:8px}
</style>
</head>
<body>
<div class="wrap">
  <div class="card">
    <h1>KenGoå¼ ç°¡æ˜“è¨ºæ–­ï¼ˆã‚„ã‚Šç›´ã—å®‰å®šç‰ˆï¼‰</h1>
    <p class="lead">ç”Ÿå¹´æœˆæ—¥ã ã‘ã§ â€œ6å¼ï¼…â€ ã¨ â€œç›¸æ€§ãƒªãƒ³ã‚°ï¼ˆä»»æ„ï¼‰â€ ã‚’è¡¨ç¤ºã€‚iPhoneå‘ã‘ã«å¤§ãã‚ï¼†ã‚·ãƒ³ãƒ—ãƒ«ã€‚</p>

    <div class="row">
      <div class="card" style="margin:0">
        <label>ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰</label>
        <input id="nickA" class="input" placeholder="KenGoï¼ˆä»»æ„ï¼‰">
        <label>ç”Ÿå¹´æœˆæ—¥ï¼ˆè‡ªç”±å…¥åŠ›ï¼‰</label>
        <input id="dateA" class="input" inputmode="numeric" placeholder="19900504 / 1990-05-04 / 1990/05/04">
        <div id="errA" class="err">æ—¥ä»˜ã®å½¢å¼ã‚’ç¢ºèªã—ã¦ã­ã€‚</div>
        <button id="btnSelf">è¨ºæ–­ã™ã‚‹</button>
      </div>

      <div class="card" style="margin:0">
        <label>ç›¸æ‰‹ã®ãƒ‹ãƒƒã‚¯ãƒãƒ¼ãƒ ï¼ˆä»»æ„ï¼‰</label>
        <input id="nickB" class="input" placeholder="Rinï¼ˆä»»æ„ï¼‰">
        <label>ç›¸æ‰‹ã®ç”Ÿå¹´æœˆæ—¥ï¼ˆä»»æ„ï¼‰</label>
        <input id="dateB" class="input" inputmode="numeric" placeholder="19940322 / 1994-03-22 ãªã©">
        <div id="errB" class="err">ç›¸æ‰‹ã®æ—¥ä»˜ã®å½¢å¼ã‚’ç¢ºèªã—ã¦ã­ã€‚</div>
        <button id="btnBoth">ç›¸æ€§ã‚‚å‡ºã™</button>
      </div>
    </div>

    <div id="selfBox" class="result fly" hidden>
      <h2>ã‚ãªãŸã®çµæœ</h2>
      <div id="selfBadges" class="badges"></div>
      <p id="selfText" style="margin:8px 0 0"></p>
      <h3 style="margin:12px 0 6px">6å¼ï¼ˆå††ç’°ã®6æ–¹å‘ï¼‰ï¼…</h3>
      <div id="sixRows" class="six"></div>
    </div>

    <div id="pairBox" class="result fly" hidden>
      <h2>ç›¸æ€§çµæœ</h2>
      <div id="pairBadges" class="badges"></div>
      <p id="pairText" style="margin:8px 0 0"></p>
      <div class="ring">
        <svg id="ring" width="240" height="240" viewBox="0 0 240 240" aria-label="Compatibility Rings">
          <defs>
            <linearGradient id="gA" x1="0" x2="1"><stop offset="0%" stop-color="#60a5fa"/><stop offset="100%" stop-color="#22d3ee"/></linearGradient>
            <linearGradient id="gB" x1="0" x2="1"><stop offset="0%" stop-color="#a3e635"/><stop offset="100%" stop-color="#60a5fa"/></linearGradient>
          </defs>
          <circle cx="120" cy="120" r="90" stroke="#1f2937" stroke-width="12" fill="none" opacity=".6"/>
          <circle cx="120" cy="120" r="65" stroke="#1f2937" stroke-width="12" fill="none" opacity=".6"/>
          <path id="arcA" d="" stroke="url(#gA)" stroke-width="12" fill="none" stroke-linecap="round"/>
          <path id="arcB" d="" stroke="url(#gB)" stroke-width="12" fill="none" stroke-linecap="round"/>
          <text id="ringScore" x="120" y="126" text-anchor="middle" font-size="26" fill="currentColor" font-weight="700">--%</text>
        </svg>
        <div id="ringTips" class="ringtips"></div>
      </div>
    </div>

    <p class="foot">â€»ã‚¨ãƒ³ã‚¿ãƒ¡ç”¨ã€‚æ„Ÿã˜ã‚‹â†’ã‚ã‹ã‚‹ï¼ˆBâ†’Aï¼‰ã§éŠã‚“ã§ã­ã€‚</p>
  </div>
</div>

<script>
(()=>{
// ===== ãƒ¦ãƒ¼ãƒ†ã‚£ãƒªãƒ†ã‚£ï¼šæ—¥ä»˜ã‚’æŸ”è»Ÿã«è§£é‡ˆ =====
function parseDate(s){
  if(!s) return null;
  const z2h = String(s).trim().replace(/[ï¼-ï¼™ï¼ï¼ï¼ãƒ¼âˆ’]/g, c=>({"ï¼":"0","ï¼‘":"1","ï¼’":"2","ï¼“":"3","ï¼”":"4","ï¼•":"5","ï¼–":"6","ï¼—":"7","ï¼˜":"8","ï¼™":"9","ï¼":"/","ï¼":"-","ãƒ¼":"-","âˆ’":"-"}[c]??c));
  const digits = z2h.replace(/[^\d]/g,"");
  if(digits.length!==8) return null;
  const y=+digits.slice(0,4), m=+digits.slice(4,6), d=+digits.slice(6,8);
  const md=[31,(y%4===0&&(y%100!==0||y%400===0))?29:28,31,30,31,30,31,31,30,31,30,31];
  if(m<1||m>12||d<1||d>md[m-1]) return null;
  return {y,m,d};
}
function showErr(id, on){ const el=document.getElementById(id); el.style.display=on?"block":"none"; }

// ===== å…ƒç´  & ç›¸æ€§ï¼ˆç°¡æ˜“ï¼‰ =====
const ELEMENTS=["WIND","FIRE","WATER","EARTH"];
const EMOJI={WIND:"ğŸ’¨",FIRE:"ğŸ”¥",WATER:"ğŸŒŠ",EARTH:"ğŸª¨"};
const JP={WIND:"é¢¨",FIRE:"ç«",WATER:"æ°´",EARTH:"åœ°"};
const COLOR={WIND:"#22d3ee",FIRE:"#fb7185",WATER:"#60a5fa",EARTH:"#a3e635"};
const COMP={
  WIND:{WIND:"GOOD",FIRE:"GREAT",WATER:"GOOD",EARTH:"NEUTRAL"},
  FIRE:{WIND:"GREAT",FIRE:"SPICY",WATER:"GOOD",EARTH:"GOOD"},
  WATER:{WIND:"GOOD",FIRE:"GOOD",WATER:"GOOD",EARTH:"GREAT"},
  EARTH:{WIND:"NEUTRAL",FIRE:"GOOD",WATER:"GREAT",EARTH:"GOOD"}
};
const COMP_EMO={GREAT:"ğŸ’",GOOD:"ğŸ’«",NEUTRAL:"ğŸŒ—",SPICY:"ğŸŒ¶ï¸"};
const COMP_TXT={GREAT:"æœ€é«˜ã®è¿½ã„é¢¨ã€‚æ”¾ã£ã¦ãŠã„ã¦ã‚‚å›ã‚‹ã€‚",GOOD:"å¿ƒåœ°ã‚ˆãä¼¸ã³ã‚‹ã€‚å°ã•ãªåˆå›³ã§ååˆ†ã€‚",NEUTRAL:"å¯ã‚‚ä¸å¯ã‚‚ãªã—ã€‚å°ã•ãªâ€œå„€å¼â€ã§å®‰å®šã€‚",SPICY:"åˆºæ¿€ã¨æ¥½ã—ã•ã€‚ãƒšãƒ¼ã‚¹é…æ…®ï¼‹åˆå›³ã®ç´„æŸã€‚"};
const COMP_SCORE={GREAT:88,GOOD:72,NEUTRAL:55,SPICY:66};

// æ±ºå®šçš„ã«è¦ç´ ã‚’å‡ºã™
function pickElement(ymd){ return ELEMENTS[(ymd.m + ymd.d) % 4]; }

// 6å¼ï¼…ï¼ˆDOBã‹ã‚‰å®‰å®šç”Ÿæˆï¼‰
function sixVector(ymd){
  let seed=ymd.y*10000+ymd.m*100+ymd.d;
  function rnd(){ seed=(seed*1664525+1013904223)>>>0; return seed/4294967295; }
  const raw=[rnd(),rnd(),rnd(),rnd(),rnd(),rnd()].map(x=>0.6+x*0.9);
  raw[0]*=1+((ymd.d%5)-2)*0.03; // Circle
  raw[4]*=1+((ymd.m%4)-1)*0.04; // Wind
  raw[5]*=1+(((ymd.y%10)-5)*0.01); // Rubber ritual
  const sum=raw.reduce((a,b)=>a+b,0);
  return raw.map(v=>Math.round((v/sum)*100));
}
const SIXNAMES=["Circle-Beingï¼ˆäººã¯å††ï¼‰","Arrow-Worldï¼ˆçŸ¢å°ä¸–ç•Œï¼‰","Return-Growthï¼ˆå¯ã‚‹å­ã¯è‚²ã¤ï¼‰","Top-View Identityï¼ˆä¸Šè¦–ç‚¹ï¼‰","Wind Outflow â†’ Returnï¼ˆé¢¨ã®å‘¼å¸ï¼‰","Rubber Return Keyï¼ˆå¸°é‚„ã‚­ãƒ¼ï¼‰"];

function badge(html){
  const s=document.createElement("span"); s.className="badge"; s.innerHTML=html; return s;
}
function renderSelf(name, el, ymd){
  const b=document.getElementById("selfBadges"); b.innerHTML="";
  b.append(badge(`${EMOJI[el]} <b style="color:${COLOR[el]}">${JP[el]}ï¼ˆ${el}ï¼‰</b>`));
  b.append(badge("ğŸ’  Core=Rubber")); b.append(badge("ğŸ’¨ Wind=Flow")); b.append(badge("â­• Circle=Return"));
  const who = name?`${name} ã¯`:"ã‚ãªãŸã¯";
  document.getElementById("selfText").innerHTML = `ğŸª„ <b>${who} ${JP[el]}ï¼ˆ${el}ï¼‰</b>ã€‚<br>åˆå›³ï¼šæ·±å‘¼å¸ãƒ»å§¿å‹¢ãƒªã‚»ãƒƒãƒˆãƒ»å°ä¼‘æ­¢ã€‚å¤–åœ§ã¯ã€Œå¸åâ†’èª¿æ•´â†’è¿”ã™ã€ã€‚`;
  const vec=sixVector(ymd);
  const rows=document.getElementById("sixRows"); rows.innerHTML="";
  const colors=["#8b5cf6","#22d3ee","#f97316","#10b981","#60a5fa","#f472b6"];
  SIXNAMES.forEach((nm,i)=>{
    const row=document.createElement("div"); row.className="six-row";
    const n=document.createElement("div"); n.className="six-name"; n.textContent=nm;
    const bar=document.createElement("div"); bar.className="bar";
    const fill=document.createElement("i"); fill.style.background=colors[i]; bar.appendChild(fill);
    const pct=document.createElement("div"); pct.className="pct"; pct.textContent=vec[i]+"%";
    row.append(n,bar,pct); rows.appendChild(row);
    requestAnimationFrame(()=>{ fill.style.width=vec[i]+"%"; });
  });
}
function arcPath(cx,cy,r,startDeg,spanDeg){
  const toXY=(deg)=>[cx + r*Math.cos((deg-90)*Math.PI/180), cy + r*Math.sin((deg-90)*Math.PI/180)];
  const end=startDeg+spanDeg, large=spanDeg>180?1:0;
  const [sx,sy]=toXY(startDeg), [ex,ey]=toXY(end);
  return `M ${sx} ${sy} A ${r} ${r} 0 ${large} 1 ${ex} ${ey}`;
}
function renderPair(elA, elB, nameA, nameB){
  const rank=COMP[elA][elB], emo=COMP_EMO[rank], text=COMP_TXT[rank], score=COMP_SCORE[rank];
  const pb=document.getElementById("pairBadges"); pb.innerHTML="";
  pb.append(badge(`${EMOJI[elA]} ${(nameA||"ã‚ãªãŸ")}: <b style="color:${COLOR[elA]}">${JP[elA]}</b>`));
  pb.append(badge(`${EMOJI[elB]} ${(nameB||"ç›¸æ‰‹")}: <b style="color:${COLOR[elB]}">${JP[elB]}</b>`));
  pb.append(badge(`${emo} <b>${rank}</b>`));
  document.getElementById("pairText").textContent = `${emo} ${rank} â€” ${text}`;
  const span={GREAT:300,GOOD:240,SPICY:220,NEUTRAL:180}[rank]||220;
  document.getElementById("arcA").setAttribute("d", arcPath(120,120,90,20,span));
  document.getElementById("arcB").setAttribute("d", arcPath(120,120,65,30,Math.max(160,span-40)));
  document.getElementById("ringScore").textContent = score+"%";
  document.getElementById("ringTips").innerHTML =
    `<span class="tag">${nameA||"ã‚ãªãŸ"}: <b style="color:${COLOR[elA]}">${JP[elA]}</b></span>
     <span class="tag">${nameB||"ç›¸æ‰‹"}: <b style="color:${COLOR[elB]}">${JP[elB]}</b></span>`;
}

// ===== ã‚¯ãƒªãƒƒã‚¯ =====
function reveal(id){ const box=document.getElementById(id); box.hidden=false; requestAnimationFrame(()=>box.classList.add("in")); box.scrollIntoView({behavior:"smooth",block:"start"}); }
function reset(id){ const box=document.getElementById(id); box.hidden=true; box.classList.remove("in"); }

document.getElementById("btnSelf").addEventListener("click", ()=>{
  const a=parseDate(document.getElementById("dateA").value);
  if(!a){ showErr("errA",true); return; } showErr("errA",false);
  const elA=pickElement(a);
  renderSelf(document.getElementById("nickA").value.trim(), elA, a);
  reset("pairBox"); reveal("selfBox");
});
document.getElementById("btnBoth").addEventListener("click", ()=>{
  const a=parseDate(document.getElementById("dateA").value);
  const b=parseDate(document.getElementById("dateB").value);
  showErr("errA",!a); showErr("errB",!b);
  if(!a||!b) return;
  const elA=pickElement(a), elB=pickElement(b);
  renderSelf(document.getElementById("nickA").value.trim(), elA, a);
  const nA=document.getElementById("nickA").value.trim();
  const nB=document.getElementById("nickB").value.trim();
  renderPair(elA, elB, nA, nB);
  reveal("selfBox"); reveal("pairBox");
});
})();
</script>
</body>
</html>